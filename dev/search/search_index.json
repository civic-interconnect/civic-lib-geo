{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Civic Interconnect Project Documentation","text":"<p>Welcome to the documentation hub for Civic Interconnect (CI) projects.</p> <p>Use the navigation menu to explore available modules, APIs, and tools.</p> <p>For more information, visit the Civic Interconnect GitHub organization.</p>"},{"location":"api/","title":"Civic Library Geo API Reference","text":"<p>Auto-generated documentation for the <code>civic_lib_geo</code> library and its CLI tools.</p>"},{"location":"api/#library-civic_lib_geo","title":"Library: civic_lib_geo","text":""},{"location":"api/#civic_lib_geo","title":"civic_lib_geo","text":""},{"location":"api/#civic_lib_geo.cli","title":"cli","text":""},{"location":"api/#civic_lib_geo.cli.check_size","title":"check_size","text":"<p>check_size.py.</p> <p>Check the size of a GeoJSON file and whether it exceeds GitHub Pages limits.</p> Used by civic-geo CLI <p>civic-geo check-size"},{"location":"api/#civic_lib_geo.cli.check_size.main","title":"main","text":"<pre><code>main(path: Path) -&gt; int\n</code></pre> <p>Print the size of a GeoJSON file and whether it exceeds GitHub Pages limits.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file to inspect.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if OK, 1 if an error occurs.</p>"},{"location":"api/#civic_lib_geo.cli.chunk_geojson","title":"chunk_geojson","text":"<p>chunk_geojson.py.</p> <p>Utility to split a GeoJSON FeatureCollection into smaller files.</p> Used by civic-geo CLI <p>civic-geo chunk path/to/file.geojson --max-features 500 civic-geo chunk path/to/folder --all-files</p>"},{"location":"api/#civic_lib_geo.cli.chunk_geojson.chunk_one","title":"chunk_one","text":"<pre><code>chunk_one(path: Path, max_features: int, output_dir: Path)\n</code></pre> <p>Chunk a single GeoJSON file and write the output files.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to input GeoJSON file.</p> required <code>max_features</code> <code>int</code> <p>Max features per chunk.</p> required <code>output_dir</code> <code>Path</code> <p>Output folder to store chunks.</p> required"},{"location":"api/#civic_lib_geo.cli.chunk_geojson.main","title":"main","text":"<pre><code>main(\n    path: Path,\n    max_features: int = 500,\n    output_dir: Path = Path('chunks'),\n    all_files: bool = False,\n) -&gt; int\n</code></pre> <p>Chunk a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Input file or folder path.</p> required <code>max_features</code> <code>int</code> <p>Max features per chunk.</p> <code>500</code> <code>output_dir</code> <code>Path</code> <p>Directory to store chunks.</p> <code>Path('chunks')</code> <code>all_files</code> <code>bool</code> <p>If True and path is a folder, chunk all files in it.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Exit code, 0 if success, 1 if failure.</p>"},{"location":"api/#civic_lib_geo.cli.cli","title":"cli","text":"<p>cli.py.</p> <p>Command-line interface (CLI) for civic-lib-geo.</p> <p>Provides repo-specific commands for: - Chunking - Simplifying - Property inspection - File size checks</p> <p>Run <code>civic-geo --help</code> for usage.</p>"},{"location":"api/#civic_lib_geo.cli.cli.check_size_command","title":"check_size_command","text":"<pre><code>check_size_command(path: Path)\n</code></pre> <p>Report the size of a GeoJSON file and whether it exceeds the GitHub Pages 25MB limit.</p>"},{"location":"api/#civic_lib_geo.cli.cli.chunk_command","title":"chunk_command","text":"<pre><code>chunk_command(\n    folder: Path = FOLDER_ARG,\n    max_features: int = 500,\n    single_file: Path = SINGLE_FILE_OPT,\n)\n</code></pre> <p>Chunk a GeoJSON file or all files in a folder into smaller files with limited features.</p>"},{"location":"api/#civic_lib_geo.cli.cli.props_command","title":"props_command","text":"<pre><code>props_command(path: Path)\n</code></pre> <p>Display the property keys from the first feature of a GeoJSON file.</p>"},{"location":"api/#civic_lib_geo.cli.cli.simplify_command","title":"simplify_command","text":"<pre><code>simplify_command(\n    folder: Path = FOLDER_ARG,\n    tolerance: float = 0.01,\n    single_file: Path = SINGLE_FILE_OPT,\n)\n</code></pre> <p>Simplify one GeoJSON file or all files in a folder using the given tolerance.</p>"},{"location":"api/#civic_lib_geo.cli.cli.shapefile_to_geojson_command","title":"shapefile_to_geojson_command","text":"<pre><code>shapefile_to_geojson_command(\n    shp_path: Path, geojson_path: Path\n)\n</code></pre> <p>Convert a shapefile to GeoJSON.</p>"},{"location":"api/#civic_lib_geo.cli.cli.topojson_to_geojson_command","title":"topojson_to_geojson_command","text":"<pre><code>topojson_to_geojson_command(\n    topo_path: Path, geojson_path: Path\n)\n</code></pre> <p>Convert a TopoJSON file to GeoJSON using GeoPandas (if supported).</p>"},{"location":"api/#civic_lib_geo.cli.cli.main","title":"main","text":"<pre><code>main() -&gt; int\n</code></pre> <p>Run the main entry point for the CLI application.</p> <p>This function serves as the primary entry point for the command-line interface. It initializes and runs the app, then returns a success status code.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Exit status code (0 for success).</p>"},{"location":"api/#civic_lib_geo.cli.read_props","title":"read_props","text":"<p>read_props.py.</p> <p>Command-line utility to preview feature properties in one or more GeoJSON files.</p> <p>Displays the <code>.properties</code> dictionary for the first few features in each file. Useful for inspecting available fields before cleaning, chunking, or simplifying.</p> <p>Supports: - A single file: <code>civic-geo read-props file.geojson</code> - A folder of files: <code>civic-geo read-props data/ --all-files</code></p>"},{"location":"api/#civic_lib_geo.cli.read_props.read_props_one","title":"read_props_one","text":"<pre><code>read_props_one(\n    path: Path,\n    output: Path | None = None,\n    max_rows: int = 5,\n)\n</code></pre> <p>Print properties from the first few features in a GeoJSON file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file.</p> required <code>output</code> <code>Path | None</code> <p>Ignored in this function (kept for compatibility).</p> <code>None</code> <code>max_rows</code> <code>int</code> <p>Number of feature properties to preview.</p> <code>5</code>"},{"location":"api/#civic_lib_geo.cli.read_props.main","title":"main","text":"<pre><code>main(path: Path, all_files: bool = False) -&gt; int\n</code></pre> <p>Display feature properties for a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>File or folder path.</p> required <code>all_files</code> <code>bool</code> <p>If True and path is a folder, process all .geojson files inside.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 on error.</p>"},{"location":"api/#civic_lib_geo.cli.shapefile_to_geojson","title":"shapefile_to_geojson","text":"<p>shapefile_to_geojson.py.</p> <p>Command-line utility to convert a shapefile to GeoJSON.</p> Used by <p>civic-geo shapefile-to-geojson SHAPEFILE_PATH GEOJSON_PATH</p>"},{"location":"api/#civic_lib_geo.cli.shapefile_to_geojson.main","title":"main","text":"<pre><code>main(shp_path: Path, geojson_path: Path) -&gt; int\n</code></pre> <p>Convert a shapefile to GeoJSON.</p> <p>Parameters:</p> Name Type Description Default <code>shp_path</code> <code>Path</code> <p>Input .shp file path.</p> required <code>geojson_path</code> <code>Path</code> <p>Output .geojson file path.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 on error.</p>"},{"location":"api/#civic_lib_geo.cli.simplify_geojson","title":"simplify_geojson","text":"<p>simplify_geojson.py.</p> <p>Command-line utility to simplify the geometry of one or more GeoJSON files.</p> <p>Reduces geometry complexity using a specified tolerance and saves the simplified output to a new file. When given a directory with --all-files, all <code>.geojson</code> files will be processed.</p> Usage <p>civic-geo simplify path/to/file.geojson civic-geo simplify path/to/folder --all-files</p>"},{"location":"api/#civic_lib_geo.cli.simplify_geojson.simplify_one","title":"simplify_one","text":"<pre><code>simplify_one(path: Path, tolerance: float, output: Path)\n</code></pre> <p>Simplify a single GeoJSON file and write the output.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the original GeoJSON file.</p> required <code>tolerance</code> <code>float</code> <p>Tolerance for simplification.</p> required <code>output</code> <code>Path</code> <p>Output path for the simplified file.</p> required"},{"location":"api/#civic_lib_geo.cli.simplify_geojson.main","title":"main","text":"<pre><code>main(\n    path: Path,\n    tolerance: float = 0.01,\n    output: Path | None = None,\n    all_files: bool = False,\n)\n</code></pre> <p>Simplify a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Input file or folder.</p> required <code>tolerance</code> <code>float</code> <p>Simplification tolerance.</p> <code>0.01</code> <code>output</code> <code>Path | None</code> <p>Output file path for single file use.</p> <code>None</code> <code>all_files</code> <code>bool</code> <p>If True and path is a folder, simplify all .geojson files.</p> <code>False</code>"},{"location":"api/#civic_lib_geo.cli.topojson_to_geojson","title":"topojson_to_geojson","text":"<p>topojson_to_geojson.py.</p> <p>Command-line utility to convert a TopoJSON file to GeoJSON.</p> Used by <p>civic-geo topojson-to-geojson TOPOJSON_PATH GEOJSON_PATH</p>"},{"location":"api/#civic_lib_geo.cli.topojson_to_geojson.main","title":"main","text":"<pre><code>main(topo_path: Path, geojson_path: Path) -&gt; int\n</code></pre> <p>Convert a TopoJSON file to GeoJSON using GeoPandas (if supported).</p> <p>Parameters:</p> Name Type Description Default <code>topo_path</code> <code>Path</code> <p>Input .topojson file path.</p> required <code>geojson_path</code> <code>Path</code> <p>Output .geojson file path.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 if failure.</p>"},{"location":"api/#civic_lib_geo.fips_utils","title":"fips_utils","text":"<p>civic_lib_geo/fips_utils.py.</p> <p>Utilities for working with FIPS codes.</p> <p>MIT License \u2014 maintained by Civic Interconnect</p>"},{"location":"api/#civic_lib_geo.fips_utils.read_csv_from_path","title":"read_csv_from_path","text":"<pre><code>read_csv_from_path(source: Path) -&gt; pd.DataFrame\n</code></pre> <p>Read a CSV file from the given path and returns a DataFrame.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>Path</code> <p>Path to the CSV file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>pd.DataFrame: DataFrame containing the CSV data.</p>"},{"location":"api/#civic_lib_geo.fips_utils.get_state_fips_df","title":"get_state_fips_df","text":"<pre><code>get_state_fips_df(\n    source: Path | None = None,\n) -&gt; pd.DataFrame\n</code></pre> <p>Load and return a DataFrame of US state FIPS codes.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>Path | None</code> <p>Path to a CSV file. If None, uses the default embedded CSV.</p> <code>None</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pd.DataFrame: A DataFrame with columns ['state_code', 'state_name', 'fips_code'].</p>"},{"location":"api/#civic_lib_geo.fips_utils.get_fips_by_state_code","title":"get_fips_by_state_code","text":"<pre><code>get_fips_by_state_code(\n    state_code: str, source: Path | None = None\n) -&gt; str\n</code></pre> <p>Return the FIPS code for a given 2-letter state code.</p> <p>Parameters:</p> Name Type Description Default <code>state_code</code> <code>str</code> <p>A 2-letter state abbreviation (e.g., 'MN').</p> required <code>source</code> <code>Path | None</code> <p>Optional override path to a custom CSV file.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Corresponding FIPS code (e.g., '27').</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the state code is not found.</p>"},{"location":"api/#civic_lib_geo.fips_utils.get_state_name_by_code","title":"get_state_name_by_code","text":"<pre><code>get_state_name_by_code(\n    state_code: str, source: Path | None = None\n) -&gt; str\n</code></pre> <p>Return the full state name for a given 2-letter state code.</p> <p>Parameters:</p> Name Type Description Default <code>state_code</code> <code>str</code> <p>A 2-letter state abbreviation.</p> required <code>source</code> <code>Path | None</code> <p>Optional override path to a custom CSV file.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Full state name (e.g., 'Minnesota').</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the state code is not found.</p>"},{"location":"api/#civic_lib_geo.geojson_utils","title":"geojson_utils","text":"<p>civic_lib_geo/geojson_utils.py.</p> <p>GeoJSON utility functions for Civic Interconnect.</p> <p>MIT License \u2014 maintained by Civic Interconnect</p>"},{"location":"api/#civic_lib_geo.geojson_utils.apply_to_geojson_folder","title":"apply_to_geojson_folder","text":"<pre><code>apply_to_geojson_folder(\n    folder: Path,\n    action_fn: Callable,\n    *,\n    suffix: str = '_processed.geojson',\n    tolerance: float | None = None,\n    max_features: int | None = None,\n)\n</code></pre> <p>Apply an action to every .geojson file in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>folder</code> <code>Path</code> <p>Path to folder containing .geojson files.</p> required <code>action_fn</code> <code>Callable</code> <p>Function to apply to each file.</p> required <code>suffix</code> <code>str</code> <p>Suffix to add to output filenames.</p> <code>'_processed.geojson'</code> <code>tolerance</code> <code>float | None</code> <p>Optional tolerance value for simplification.</p> <code>None</code> <code>max_features</code> <code>int | None</code> <p>Optional limit for chunking.</p> <code>None</code>"},{"location":"api/#civic_lib_geo.geojson_utils.chunk_geojson_features","title":"chunk_geojson_features","text":"<pre><code>chunk_geojson_features(\n    geojson: dict,\n    max_features: int = 500,\n    output_dir: str | Path = 'chunks',\n    base_name: str = 'chunk',\n) -&gt; list[Path]\n</code></pre> <p>Split a GeoJSON FeatureCollection into multiple smaller files.</p> <p>Parameters:</p> Name Type Description Default <code>geojson</code> <code>dict</code> <p>Loaded GeoJSON dictionary (must contain a 'features' list).</p> required <code>max_features</code> <code>int</code> <p>Maximum number of features per chunk.</p> <code>500</code> <code>output_dir</code> <code>str | Path</code> <p>Directory to write chunked files to.</p> <code>'chunks'</code> <code>base_name</code> <code>str</code> <p>Base filename prefix for each chunk.</p> <code>'chunk'</code> <p>Returns:</p> Type Description <code>list[Path]</code> <p>List of Paths to chunked files.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If 'features' is missing or not a list.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.get_file_size_mb","title":"get_file_size_mb","text":"<pre><code>get_file_size_mb(path: str | Path) -&gt; float\n</code></pre> <p>Return the file size in megabytes (MB).</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str | Path</code> <p>Path to the file.</p> required <p>Returns:</p> Type Description <code>float</code> <p>File size in megabytes.</p> <p>Raises:</p> Type Description <code>FileNotFoundError</code> <p>If the file does not exist.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.is_valid_geojson_feature_collection","title":"is_valid_geojson_feature_collection","text":"<pre><code>is_valid_geojson_feature_collection(obj: dict) -&gt; bool\n</code></pre> <p>Quick check if an object looks like a valid GeoJSON FeatureCollection.</p> <p>Parameters:</p> Name Type Description Default <code>obj</code> <code>dict</code> <p>Dictionary to check.</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if valid structure, else False.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.list_geojson_files","title":"list_geojson_files","text":"<pre><code>list_geojson_files(folder: Path) -&gt; list[Path]\n</code></pre> <p>Return a list of .geojson files in the specified folder.</p> <p>Parameters:</p> Name Type Description Default <code>folder</code> <code>Path</code> <p>Directory to search.</p> required <p>Returns:</p> Type Description <code>list[Path]</code> <p>list[Path]: List of .geojson file paths.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.load_geojson","title":"load_geojson","text":"<pre><code>load_geojson(path: Path) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Load a GeoJSON file into a GeoDataFrame.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file.</p> required <p>Returns:</p> Type Description <code>GeoDataFrame</code> <p>gpd.GeoDataFrame: A GeoDataFrame with geometries and attributes.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.needs_chunking","title":"needs_chunking","text":"<pre><code>needs_chunking(\n    path: str | Path, max_mb: float = 25.0\n) -&gt; bool\n</code></pre> <p>Determine whether the GeoJSON file exceeds the size threshold.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str | Path</code> <p>Path to the file.</p> required <code>max_mb</code> <code>float</code> <p>Maximum file size before chunking is recommended.</p> <code>25.0</code> <p>Returns:</p> Type Description <code>bool</code> <p>True if file exceeds max_mb, else False.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.read_geojson_props","title":"read_geojson_props","text":"<pre><code>read_geojson_props(path: Path) -&gt; list[dict[str, Any]]\n</code></pre> <p>Load only the properties from a GeoJSON file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file.</p> required <p>Returns:</p> Type Description <code>list[dict[str, Any]]</code> <p>list[dict[str, Any]]: A list of property dictionaries from each feature.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.save_geojson","title":"save_geojson","text":"<pre><code>save_geojson(\n    gdf: GeoDataFrame, path: Path, indent: int = 2\n) -&gt; Path\n</code></pre> <p>Save a GeoDataFrame to GeoJSON format.</p> <p>Parameters:</p> Name Type Description Default <code>gdf</code> <code>GeoDataFrame</code> <p>The GeoDataFrame to save.</p> required <code>path</code> <code>Path</code> <p>Output file path.</p> required <code>indent</code> <code>int</code> <p>Indentation level for formatting (unused by GeoPandas but included for consistency).</p> <code>2</code> <p>Returns:</p> Name Type Description <code>Path</code> <code>Path</code> <p>The path to the saved file.</p>"},{"location":"api/#civic_lib_geo.geojson_utils.simplify_geojson","title":"simplify_geojson","text":"<pre><code>simplify_geojson(\n    gdf: GeoDataFrame, tolerance: float\n) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Return a simplified copy of the GeoDataFrame using the given tolerance.</p> <p>Parameters:</p> Name Type Description Default <code>gdf</code> <code>GeoDataFrame</code> <p>The input GeoDataFrame.</p> required <code>tolerance</code> <code>float</code> <p>Tolerance for simplification (smaller values retain more detail).</p> required <p>Returns:</p> Type Description <code>GeoDataFrame</code> <p>gpd.GeoDataFrame: A new GeoDataFrame with simplified geometry.</p>"},{"location":"api/#civic_lib_geo.geometry","title":"geometry","text":"<p>Geometry validation and repair utilities.</p> <p>File: civic_lib_geo/geometry.py</p>"},{"location":"api/#civic_lib_geo.geometry.repair_geometries","title":"repair_geometries","text":"<pre><code>repair_geometries(gdf: GeoDataFrame) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Repair invalid geometries in a GeoDataFrame and normalize to MultiPolygon format.</p> <p>This function performs a multi-step repair process: 1. Applies make_valid() to invalid geometries 2. Falls back to buffer(0) for any remaining invalid geometries 3. Normalizes all Polygon geometries to MultiPolygon format 4. Removes any empty geometries that may result from the repair process Parameters</p> <p>gdf : gpd.GeoDataFrame     Input GeoDataFrame containing geometries that may be invalid</p>"},{"location":"api/#civic_lib_geo.geometry.repair_geometries--returns","title":"Returns:","text":"<p>gpd.GeoDataFrame     GeoDataFrame with repaired and normalized geometries, excluding any     empty geometries that resulted from the repair process</p>"},{"location":"api/#civic_lib_geo.geometry.repair_geometries--notes","title":"Notes:","text":"<ul> <li>The function modifies geometries in-place during processing</li> <li>All valid Polygon geometries are converted to MultiPolygon for consistency</li> <li>Empty geometries are filtered out in the final result</li> <li>The buffer(0) fallback is particularly effective for self-intersection issues</li> </ul>"},{"location":"api/#civic_lib_geo.geometry.validate_geometries","title":"validate_geometries","text":"<pre><code>validate_geometries(gdf: GeoDataFrame) -&gt; bool\n</code></pre> <p>Check if all geometries are valid.</p>"},{"location":"api/#civic_lib_geo.shapefile_utils","title":"shapefile_utils","text":"<p>civic_lib_geo/shapefile_utils.py.</p> <p>Shapefile utility functions for Civic Interconnect.</p> <p>MIT License \u2014 maintained by Civic Interconnect</p>"},{"location":"api/#civic_lib_geo.shapefile_utils.convert_shapefile_to_geojson","title":"convert_shapefile_to_geojson","text":"<pre><code>convert_shapefile_to_geojson(\n    shp_path: Path, geojson_path: Path\n) -&gt; Path\n</code></pre> <p>Convert a shapefile to a GeoJSON file.</p> <p>Parameters:</p> Name Type Description Default <code>shp_path</code> <code>Path</code> <p>Path to the source shapefile (.shp).</p> required <code>geojson_path</code> <code>Path</code> <p>Path to the output GeoJSON file.</p> required <p>Returns:</p> Name Type Description <code>Path</code> <code>Path</code> <p>The path to the saved GeoJSON file.</p>"},{"location":"api/#civic_lib_geo.shapefile_utils.load_shapefile","title":"load_shapefile","text":"<pre><code>load_shapefile(path: Path) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Load a shapefile into a GeoDataFrame.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the shapefile (.shp).</p> required <p>Returns:</p> Type Description <code>GeoDataFrame</code> <p>gpd.GeoDataFrame: A GeoDataFrame with geometries and attributes.</p>"},{"location":"api/#civic_lib_geo.topojson_utils","title":"topojson_utils","text":"<p>civic_lib_geo/topojson_utils.py.</p> <p>TopoJSON utility functions for Civic Interconnect.</p> <p>MIT License \u2014 maintained by Civic Interconnect</p>"},{"location":"api/#civic_lib_geo.topojson_utils.convert_topojson_to_geojson","title":"convert_topojson_to_geojson","text":"<pre><code>convert_topojson_to_geojson(\n    topojson_path: Path, geojson_path: Path\n) -&gt; Path\n</code></pre> <p>Convert a TopoJSON file to a GeoJSON file using geopandas or CLI tools.</p>"},{"location":"api/#civic_lib_geo.transform","title":"transform","text":"<p>Geographic data transformation utilities.</p> <p>File: civic_lib_geo/transform.py</p>"},{"location":"api/#civic_lib_geo.transform.add_fields","title":"add_fields","text":"<pre><code>add_fields(\n    df: GeoDataFrame, add_fields: dict[str, Any]\n) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Assign constant fields and keep GeoDataFrame typing.</p>"},{"location":"api/#civic_lib_geo.transform.keep_columns","title":"keep_columns","text":"<pre><code>keep_columns(\n    df: GeoDataFrame, keep: list[str]\n) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Column subset while preserving GeoDataFrame type and geometry CRS.</p>"},{"location":"api/#civic_lib_geo.transform.normalize_columns","title":"normalize_columns","text":"<pre><code>normalize_columns(\n    df: GeoDataFrame, to_lower: bool, trim: bool\n) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Normalize column names.</p>"},{"location":"api/#civic_lib_geo.transform.rename_columns","title":"rename_columns","text":"<pre><code>rename_columns(\n    df: GeoDataFrame, mapping: dict[str, str]\n) -&gt; gpd.GeoDataFrame\n</code></pre> <p>Rename columns while preserving GeoDataFrame type.</p>"},{"location":"api/#civic_lib_geo.us_constants","title":"us_constants","text":"<p>civic_lib_geo/us_constants.py.</p> <p>US State Code Constants for Civic Interconnect</p> <p>This module defines reusable mappings and lookup records for U.S. state information, including:</p> <ul> <li>2-letter abbreviations</li> <li>Full state names</li> <li>FIPS codes</li> <li>Multiple lookup formats (by name, abbr, FIPS, lowercase)</li> <li>Pre-built record dictionaries and choice lists for UI/display</li> </ul> <p>These constants are used to standardize geodata processing and support consistent reporting.</p>"},{"location":"api/#civic_lib_geo.us_constants.StateTokens","title":"StateTokens  <code>dataclass</code>","text":"<p>Canonical state identifiers with all representations.</p>"},{"location":"api/#civic_lib_geo.us_constants.StateTokens.legacy_dir_name_lowercase_with_underscores","title":"legacy_dir_name_lowercase_with_underscores  <code>property</code>","text":"<pre><code>legacy_dir_name_lowercase_with_underscores: str\n</code></pre> <p>Legacy directory name (full state name lowercase with underscores).</p>"},{"location":"api/#civic_lib_geo.us_constants.StateTokens.iso_dir_name","title":"iso_dir_name  <code>property</code>","text":"<pre><code>iso_dir_name: str\n</code></pre> <p>ISO-standardized directory name (lowercase abbreviation).</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_record_by_abbr","title":"get_state_record_by_abbr","text":"<pre><code>get_state_record_by_abbr(abbr: str) -&gt; dict | None\n</code></pre> <p>Return state record by 2-letter abbreviation (e.g., 'MN').</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_record_by_name","title":"get_state_record_by_name","text":"<pre><code>get_state_record_by_name(name: str) -&gt; dict | None\n</code></pre> <p>Return state record by full name (e.g., 'Minnesota').</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_record_by_fips","title":"get_state_record_by_fips","text":"<pre><code>get_state_record_by_fips(fips: str) -&gt; dict | None\n</code></pre> <p>Return state record by FIPS code (e.g., '27').</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_record_by_any","title":"get_state_record_by_any","text":"<pre><code>get_state_record_by_any(value: str) -&gt; dict | None\n</code></pre> <p>Return state record by abbr, name, or FIPS code (case-insensitive).</p>"},{"location":"api/#civic_lib_geo.us_constants.list_state_choices","title":"list_state_choices","text":"<pre><code>list_state_choices() -&gt; list[tuple[str, str]]\n</code></pre> <p>Return list of (abbr, name) tuples for all states (for dropdowns/UI).</p>"},{"location":"api/#civic_lib_geo.us_constants.list_state_choices_by_fips","title":"list_state_choices_by_fips","text":"<pre><code>list_state_choices_by_fips() -&gt; list[tuple[str, str]]\n</code></pre> <p>Return list of (FIPS, name) tuples for all states (for dropdowns/UI).</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_dir_name","title":"get_state_dir_name","text":"<pre><code>get_state_dir_name(state_abbr: str) -&gt; str\n</code></pre> <p>Return the standardized directory name for a state (full lowercase name with underscores).</p> <p>DEPRECATED: Use get_state_tokens().legacy_dir_name_lowercase_with_underscores or .iso_dir_name instead.</p>"},{"location":"api/#civic_lib_geo.us_constants.get_state_tokens","title":"get_state_tokens","text":"<pre><code>get_state_tokens(value: str | None) -&gt; StateTokens\n</code></pre> <p>Get all canonical forms of a state identifier.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>str | None</code> <p>Any state identifier - 'MN', 'mn', 'Minnesota', '27', etc.</p> required <p>Returns:</p> Type Description <code>StateTokens</code> <p>StateTokens with all canonical forms</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; tokens = get_state_tokens('Minnesota')\n&gt;&gt;&gt; tokens.abbr_uppercase\n'MN'\n&gt;&gt;&gt; tokens.iso_dir_name\n'mn'\n&gt;&gt;&gt; tokens.legacy_dir_name_lowercase_with_underscores\n'minnesota'\n</code></pre>"},{"location":"api/#cli-module","title":"CLI Module","text":""},{"location":"api/#civic_lib_geo.cli","title":"civic_lib_geo.cli","text":""},{"location":"api/#subcommands","title":"Subcommands","text":""},{"location":"api/#civic_lib_geo.cli.cli","title":"civic_lib_geo.cli.cli","text":"<p>cli.py.</p> <p>Command-line interface (CLI) for civic-lib-geo.</p> <p>Provides repo-specific commands for: - Chunking - Simplifying - Property inspection - File size checks</p> <p>Run <code>civic-geo --help</code> for usage.</p>"},{"location":"api/#civic_lib_geo.cli.cli.check_size_command","title":"check_size_command","text":"<pre><code>check_size_command(path: Path)\n</code></pre> <p>Report the size of a GeoJSON file and whether it exceeds the GitHub Pages 25MB limit.</p>"},{"location":"api/#civic_lib_geo.cli.cli.chunk_command","title":"chunk_command","text":"<pre><code>chunk_command(\n    folder: Path = FOLDER_ARG,\n    max_features: int = 500,\n    single_file: Path = SINGLE_FILE_OPT,\n)\n</code></pre> <p>Chunk a GeoJSON file or all files in a folder into smaller files with limited features.</p>"},{"location":"api/#civic_lib_geo.cli.cli.props_command","title":"props_command","text":"<pre><code>props_command(path: Path)\n</code></pre> <p>Display the property keys from the first feature of a GeoJSON file.</p>"},{"location":"api/#civic_lib_geo.cli.cli.simplify_command","title":"simplify_command","text":"<pre><code>simplify_command(\n    folder: Path = FOLDER_ARG,\n    tolerance: float = 0.01,\n    single_file: Path = SINGLE_FILE_OPT,\n)\n</code></pre> <p>Simplify one GeoJSON file or all files in a folder using the given tolerance.</p>"},{"location":"api/#civic_lib_geo.cli.cli.shapefile_to_geojson_command","title":"shapefile_to_geojson_command","text":"<pre><code>shapefile_to_geojson_command(\n    shp_path: Path, geojson_path: Path\n)\n</code></pre> <p>Convert a shapefile to GeoJSON.</p>"},{"location":"api/#civic_lib_geo.cli.cli.topojson_to_geojson_command","title":"topojson_to_geojson_command","text":"<pre><code>topojson_to_geojson_command(\n    topo_path: Path, geojson_path: Path\n)\n</code></pre> <p>Convert a TopoJSON file to GeoJSON using GeoPandas (if supported).</p>"},{"location":"api/#civic_lib_geo.cli.cli.main","title":"main","text":"<pre><code>main() -&gt; int\n</code></pre> <p>Run the main entry point for the CLI application.</p> <p>This function serves as the primary entry point for the command-line interface. It initializes and runs the app, then returns a success status code.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Exit status code (0 for success).</p>"},{"location":"api/#civic_lib_geo.cli.check_size","title":"civic_lib_geo.cli.check_size","text":"<p>check_size.py.</p> <p>Check the size of a GeoJSON file and whether it exceeds GitHub Pages limits.</p> Used by civic-geo CLI <p>civic-geo check-size"},{"location":"api/#civic_lib_geo.cli.check_size.main","title":"main","text":"<pre><code>main(path: Path) -&gt; int\n</code></pre> <p>Print the size of a GeoJSON file and whether it exceeds GitHub Pages limits.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file to inspect.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if OK, 1 if an error occurs.</p>"},{"location":"api/#civic_lib_geo.cli.chunk_geojson","title":"civic_lib_geo.cli.chunk_geojson","text":"<p>chunk_geojson.py.</p> <p>Utility to split a GeoJSON FeatureCollection into smaller files.</p> Used by civic-geo CLI <p>civic-geo chunk path/to/file.geojson --max-features 500 civic-geo chunk path/to/folder --all-files</p>"},{"location":"api/#civic_lib_geo.cli.chunk_geojson.chunk_one","title":"chunk_one","text":"<pre><code>chunk_one(path: Path, max_features: int, output_dir: Path)\n</code></pre> <p>Chunk a single GeoJSON file and write the output files.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to input GeoJSON file.</p> required <code>max_features</code> <code>int</code> <p>Max features per chunk.</p> required <code>output_dir</code> <code>Path</code> <p>Output folder to store chunks.</p> required"},{"location":"api/#civic_lib_geo.cli.chunk_geojson.main","title":"main","text":"<pre><code>main(\n    path: Path,\n    max_features: int = 500,\n    output_dir: Path = Path('chunks'),\n    all_files: bool = False,\n) -&gt; int\n</code></pre> <p>Chunk a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Input file or folder path.</p> required <code>max_features</code> <code>int</code> <p>Max features per chunk.</p> <code>500</code> <code>output_dir</code> <code>Path</code> <p>Directory to store chunks.</p> <code>Path('chunks')</code> <code>all_files</code> <code>bool</code> <p>If True and path is a folder, chunk all files in it.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Exit code, 0 if success, 1 if failure.</p>"},{"location":"api/#civic_lib_geo.cli.read_props","title":"civic_lib_geo.cli.read_props","text":"<p>read_props.py.</p> <p>Command-line utility to preview feature properties in one or more GeoJSON files.</p> <p>Displays the <code>.properties</code> dictionary for the first few features in each file. Useful for inspecting available fields before cleaning, chunking, or simplifying.</p> <p>Supports: - A single file: <code>civic-geo read-props file.geojson</code> - A folder of files: <code>civic-geo read-props data/ --all-files</code></p>"},{"location":"api/#civic_lib_geo.cli.read_props.read_props_one","title":"read_props_one","text":"<pre><code>read_props_one(\n    path: Path,\n    output: Path | None = None,\n    max_rows: int = 5,\n)\n</code></pre> <p>Print properties from the first few features in a GeoJSON file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the GeoJSON file.</p> required <code>output</code> <code>Path | None</code> <p>Ignored in this function (kept for compatibility).</p> <code>None</code> <code>max_rows</code> <code>int</code> <p>Number of feature properties to preview.</p> <code>5</code>"},{"location":"api/#civic_lib_geo.cli.read_props.main","title":"main","text":"<pre><code>main(path: Path, all_files: bool = False) -&gt; int\n</code></pre> <p>Display feature properties for a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>File or folder path.</p> required <code>all_files</code> <code>bool</code> <p>If True and path is a folder, process all .geojson files inside.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 on error.</p>"},{"location":"api/#civic_lib_geo.cli.shapefile_to_geojson","title":"civic_lib_geo.cli.shapefile_to_geojson","text":"<p>shapefile_to_geojson.py.</p> <p>Command-line utility to convert a shapefile to GeoJSON.</p> Used by <p>civic-geo shapefile-to-geojson SHAPEFILE_PATH GEOJSON_PATH</p>"},{"location":"api/#civic_lib_geo.cli.shapefile_to_geojson.main","title":"main","text":"<pre><code>main(shp_path: Path, geojson_path: Path) -&gt; int\n</code></pre> <p>Convert a shapefile to GeoJSON.</p> <p>Parameters:</p> Name Type Description Default <code>shp_path</code> <code>Path</code> <p>Input .shp file path.</p> required <code>geojson_path</code> <code>Path</code> <p>Output .geojson file path.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 on error.</p>"},{"location":"api/#civic_lib_geo.cli.simplify_geojson","title":"civic_lib_geo.cli.simplify_geojson","text":"<p>simplify_geojson.py.</p> <p>Command-line utility to simplify the geometry of one or more GeoJSON files.</p> <p>Reduces geometry complexity using a specified tolerance and saves the simplified output to a new file. When given a directory with --all-files, all <code>.geojson</code> files will be processed.</p> Usage <p>civic-geo simplify path/to/file.geojson civic-geo simplify path/to/folder --all-files</p>"},{"location":"api/#civic_lib_geo.cli.simplify_geojson.simplify_one","title":"simplify_one","text":"<pre><code>simplify_one(path: Path, tolerance: float, output: Path)\n</code></pre> <p>Simplify a single GeoJSON file and write the output.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the original GeoJSON file.</p> required <code>tolerance</code> <code>float</code> <p>Tolerance for simplification.</p> required <code>output</code> <code>Path</code> <p>Output path for the simplified file.</p> required"},{"location":"api/#civic_lib_geo.cli.simplify_geojson.main","title":"main","text":"<pre><code>main(\n    path: Path,\n    tolerance: float = 0.01,\n    output: Path | None = None,\n    all_files: bool = False,\n)\n</code></pre> <p>Simplify a single file or all .geojson files in a folder.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Input file or folder.</p> required <code>tolerance</code> <code>float</code> <p>Simplification tolerance.</p> <code>0.01</code> <code>output</code> <code>Path | None</code> <p>Output file path for single file use.</p> <code>None</code> <code>all_files</code> <code>bool</code> <p>If True and path is a folder, simplify all .geojson files.</p> <code>False</code>"},{"location":"api/#civic_lib_geo.cli.topojson_to_geojson","title":"civic_lib_geo.cli.topojson_to_geojson","text":"<p>topojson_to_geojson.py.</p> <p>Command-line utility to convert a TopoJSON file to GeoJSON.</p> Used by <p>civic-geo topojson-to-geojson TOPOJSON_PATH GEOJSON_PATH</p>"},{"location":"api/#civic_lib_geo.cli.topojson_to_geojson.main","title":"main","text":"<pre><code>main(topo_path: Path, geojson_path: Path) -&gt; int\n</code></pre> <p>Convert a TopoJSON file to GeoJSON using GeoPandas (if supported).</p> <p>Parameters:</p> Name Type Description Default <code>topo_path</code> <code>Path</code> <p>Input .topojson file path.</p> required <code>geojson_path</code> <code>Path</code> <p>Output .geojson file path.</p> required <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>0 if success, 1 if failure.</p>"},{"location":"cli/","title":"CLI Reference","text":""},{"location":"cli/#quick-help","title":"Quick help","text":"<pre><code># Show top-level help\ncivic-geo --help\n\n# Show help for a subcommand\ncivic-geo &lt;subcommand&gt; --help\n</code></pre>"}]}